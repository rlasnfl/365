import tkinter as tk
from datetime import datetime, timedelta
from tkinter import messagebox

# -------------------------------
# ì „ì—­ ë³€ìˆ˜
# -------------------------------
study_start = None
total_study_time = timedelta(0)
goal_time = timedelta(hours=2)  # ëª©í‘œ ê³µë¶€ ì‹œê°„ 2ì‹œê°„

# -------------------------------
# í•¨ìˆ˜ ì •ì˜
# -------------------------------
def start_study():
    global study_start
    if study_start is None:
        study_start = datetime.now()
        status_label.config(text="ê³µë¶€ ì‹œì‘!")
    else:
        messagebox.showinfo("ì•Œë¦¼", "ì´ë¯¸ ê³µë¶€ ì¤‘ì…ë‹ˆë‹¤!")

def end_study():
    global study_start, total_study_time
    if study_start:
        elapsed = datetime.now() - study_start
        total_study_time += elapsed
        study_start = None
        status_label.config(text=f"ê³µë¶€ ì¢…ë£Œ! ì´ ê³µë¶€ ì‹œê°„: {str(total_study_time).split('.')[0]}")
        check_goal()
    else:
        messagebox.showinfo("ì•Œë¦¼", "ê³µë¶€ë¥¼ ë¨¼ì € ì‹œì‘í•˜ì„¸ìš”!")

def check_goal():
    if total_study_time >= goal_time:
        messagebox.showinfo("ì¶•í•˜!", "ì˜¤ëŠ˜ ëª©í‘œ ê³µë¶€ ì‹œê°„ ë‹¬ì„±! ğŸ‰")

def reset_time():
    global study_start, total_study_time
    study_start = None
    total_study_time = timedelta(0)
    status_label.config(text="ê³µë¶€ ì‹œê°„ ì´ˆê¸°í™”ë¨")
    messagebox.showinfo("ì•Œë¦¼", "ì´ ê³µë¶€ ì‹œê°„ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.")

# -------------------------------
# GUI ì„¤ì •
# -------------------------------
root = tk.Tk()
root.title("ê³µë¶€ ì‹œê°„ ê´€ë¦¬ ì•±")
root.geometry("400x250")
root.resizable(False, False)

# ë²„íŠ¼
start_btn = tk.Button(root, text="ê³µë¶€ ì‹œì‘", command=start_study, width=20, height=2, bg="#4CAF50", fg="white")
start_btn.pack(pady=10)

end_btn = tk.Button(root, text="ê³µë¶€ ì¢…ë£Œ", command=end_study, width=20, height=2, bg="#f44336", fg="white")
end_btn.pack(pady=10)

reset_btn = tk.Button(root, text="ì‹œê°„ ì´ˆê¸°í™”", command=reset_time, width=20, height=2, bg="#2196F3", fg="white")
reset_btn.pack(pady=10)

# ìƒíƒœ í‘œì‹œ
status_label = tk.Label(root, text="ì•±ì„ ì‹œì‘í•˜ì„¸ìš”!", font=("Arial", 12))
status_label.pack(pady=20)

root.mainloop()
